<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Realistic Budget Travel Globe</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    text-align: center;
    background: #000;
    color: white;
  }
  #container {
    display: inline-block;
    position: relative;
  }
  #pickDestination {
    padding: 12px 24px;
    font-size: 18px;
    background-color: #2c3e50;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    margin-bottom: 12px;
  }
  #tooltip {
    position: absolute;
    background: rgba(44,62,80,0.9);
    color: white;
    padding: 6px 12px;
    border-radius: 6px;
    display: none;
    font-size: 16px;
    pointer-events: none;
    transform: translate(-50%, -120%);
    white-space: nowrap;
  }
</style>
</head>
<body>

<h1>Pick Your Budget Travel Destination</h1>
<div id="container">
  <button id="pickDestination">Pick My Travel Destination</button>
  <div id="earthContainer" style="width: 500px; height: 500px;"></div>
  <div id="tooltip"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
(function(){
const destinations = [
  { name: "Hanoi, Vietnam", lat: 21.0285, lon: 105.8542 },
  { name: "Lisbon, Portugal", lat: 38.7169, lon: -9.139 },
  { name: "Budapest, Hungary", lat: 47.4979, lon: 19.0402 },
  { name: "Krak√≥w, Poland", lat: 50.0647, lon: 19.945 },
  { name: "Bali, Indonesia", lat: -8.4095, lon: 115.1889 },
  { name: "Chiang Mai, Thailand", lat: 18.7061, lon: 98.9817 },
  { name: "Istanbul, Turkey", lat: 41.0082, lon: 28.9784 },
  { name: "Prague, Czech Republic", lat: 50.0755, lon: 14.4378 },
  { name: "Sofia, Bulgaria", lat: 42.6977, lon: 23.3219 },
  { name: "La Paz, Bolivia", lat: -16.5, lon: -68.15 }
];

const container = document.getElementById('earthContainer');
const tooltip = document.getElementById('tooltip');
const button = document.getElementById('pickDestination');

let scene, camera, renderer, earthMesh, cloudMesh, atmosphereMesh;
let markers = [], selectedMarker = null;
let spinning = false, spinTarget = 0;
let glowSprite;

init();
animate();

function init(){
  scene = new THREE.Scene();

  camera = new THREE.PerspectiveCamera(45, container.clientWidth/container.clientHeight, 0.1, 1000);
  camera.position.z = 3;

  renderer = new THREE.WebGLRenderer({ antialias:true, alpha:true });
  renderer.setSize(container.clientWidth, container.clientHeight);
  container.appendChild(renderer.domElement);

  // Stars background
  const starGeometry = new THREE.BufferGeometry();
  const starCount = 2000;
  const positions = [];
  for(let i=0;i<starCount;i++){
    positions.push((Math.random()-0.5)*200);
    positions.push((Math.random()-0.5)*200);
    positions.push((Math.random()-0.5)*200);
  }
  starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(positions,3));
  const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.3 });
  const stars = new THREE.Points(starGeometry, starMaterial);
  scene.add(stars);

  // Lighting
  const ambientLight = new THREE.AmbientLight(0xffffff,0.4);
  scene.add(ambientLight);
  const directionalLight = new THREE.DirectionalLight(0xffffff,1);
  directionalLight.position.set(5,3,5);
  scene.add(directionalLight);

  const loader = new THREE.TextureLoader();

  // Earth
  const earthGeometry = new THREE.SphereGeometry(1,64,64);
  const earthMaterial = new THREE.MeshPhongMaterial({
    map: loader.load('https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg'),
    bumpMap: loader.load('https://threejs.org/examples/textures/planets/earth_bump_2048.jpg'),
    bumpScale: 0.05,
    specularMap: loader.load('https://threejs.org/examples/textures/planets/earth_specular_2048.jpg'),
    specular: new THREE.Color('grey')
  });
  earthMesh = new THREE.Mesh(earthGeometry, earthMaterial);
  scene.add(earthMesh);

  // Clouds
  const cloudGeometry = new THREE.SphereGeometry(1.01,64,64);
  const cloudMaterial = new THREE.MeshPhongMaterial({
    map: loader.load('https://threejs.org/examples/textures/planets/earth_clouds_1024.png'),
    transparent:true,
    opacity:0.4
  });
  cloudMesh = new THREE.Mesh(cloudGeometry, cloudMaterial);
  scene.add(cloudMesh);

  // Atmosphere glow
  const atmosphereGeometry = new THREE.SphereGeometry(1.03,64,64);
  const atmosphereMaterial = new THREE.MeshBasicMaterial({
    color:0x00aaff,
    transparent:true,
    opacity:0.1,
    side: THREE.BackSide
  });
  atmosphereMesh = new THREE.Mesh(atmosphereGeometry, atmosphereMaterial);
  scene.add(atmosphereMesh);

  // Markers
  destinations.forEach(dest=>{
    const geo = new THREE.SphereGeometry(0.02,8,8);
    const mat = new THREE.MeshBasicMaterial({ color:0x888888 });
    const marker = new THREE.Mesh(geo, mat);
    const pos = latLonToXYZ(dest.lat,dest.lon,1.02);
    marker.position.set(pos.x,pos.y,pos.z);
    scene.add(marker);
    marker.userData = { destination: dest };
    markers.push(marker);
  });

  // Glow sprite
  const spriteMaterial = new THREE.SpriteMaterial({
    color: 0xff0000,
    transparent:true,
    opacity:0.6,
    blending: THREE.AdditiveBlending
  });
  glowSprite = new THREE.Sprite(spriteMaterial);
  glowSprite.scale.set(0.2,0.2,0.2);
  glowSprite.visible=false;
  scene.add(glowSprite);

  button.addEventListener('click',()=>{
    if(!spinning){
      startSpin();
    }
  });

  window.addEventListener('resize', onWindowResize);
}

function latLonToXYZ(lat, lon, radius){
  const phi = (90-lat)*(Math.PI/180);
  const theta = (lon+180)*(Math.PI/180);
  return { x:-radius*Math.sin(phi)*Math.cos(theta), y:radius*Math.cos(phi), z:radius*Math.sin(phi)*Math.sin(theta) };
}

function startSpin(){
  tooltip.style.display="none";
  glowSprite.visible=false;
  selectedMarker = markers[Math.floor(Math.random()*markers.length)];
  spinTarget = - (selectedMarker.userData.destination.lon*Math.PI/180) + 2*Math.PI*3; 
  spinning=true;
}

function animate(){
  requestAnimationFrame(animate);

  // Rotate clouds
  cloudMesh.rotation.y += 0.0015;

  if(spinning){
    const diff = spinTarget - earthMesh.rotation.y;
    earthMesh.rotation.y += diff*0.05;

    if(Math.abs(diff)<0.002){
      spinning=false;
      showTooltip(selectedMarker.userData.destination.name);
    }
  } else {
    markers.forEach(m=>m.material.color.set(0x888888));
  }

  if(selectedMarker && !spinning){
    glowSprite.position.copy(selectedMarker.position);
    glowSprite.scale.set(0.2+0.05*Math.sin(Date.now()*0.01),0.2+0.05*Math.sin(Date.now()*0.01),1);
    glowSprite.visible=true;
    selectedMarker.material.color.set(0xff0000);
  }

  if(selectedMarker && tooltip.style.display==="block"){
    const vector = selectedMarker.position.clone();
    vector.project(camera);
    const x = (vector.x*0.5+0.5)*container.clientWidth;
    const y = (-vector.y*0.5+0.5)*container.clientHeight;
    tooltip.style.left=`${x}px`;
    tooltip.style.top=`${y}px`;
  }

  renderer.render(scene,camera);
}

function showTooltip(text){
  tooltip.textContent = "Your next budget trip: " + text;
  tooltip.style.display="block";
}

function onWindowResize(){
  camera.aspect = container.clientWidth/container.clientHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(container.clientWidth,container.clientHeight);
}
})();
</script>

</body>
</html>

